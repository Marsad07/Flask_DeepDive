{% extends "base.html" %}
{% block title %}{{ subject.name }}{% endblock %}

{% block content %}

<h1 style="color: {{ subject.color }};">
    {{ subject.name }}
</h1>

{% if subject.description %}
<p><strong>Description:</strong> {{ subject.description }}</p>
{% endif %}

{% if subject.study_goal %}
<p><strong>Study Goal:</strong> {{ subject.study_goal }}</p>
{% endif %}
<hr>
<h2>Tasks for {{ subject.name }}</h2>

<div class="task-list">
    {% if tasks %}
        {% for task in tasks %}
            <div class="task-item">
                <p>{{ task.task_name }}</p>

                <form method="POST" action="/subjects/{{ subject.id }}/complete_task" style="display:inline;">
                    <input type="hidden" name="task_id" value="{{ task.id }}">
                    <button type="submit">Complete</button>
                </form>

                <form method="POST" action="/subjects/{{ subject.id }}/delete_task" style="display:inline;">
                    <input type="hidden" name="task_id" value="{{ task.id }}">
                    <button type="submit">Delete</button>
                </form>
            </div>
        {% endfor %}
    {% else %}
        <p>No tasks yet for this subject.</p>
    {% endif %}
</div>
<hr>

<h3>Add a Task to This Subject</h3>
<form method="POST" action="/subjects/{{ subject.id }}/add_task">
    <input type="text" name="title" placeholder="Task title" required>
    <button type="submit">Add Task</button>
</form>
{% endblock %}
